
let allMusic = [
  {
    img: "../images_playlist/img/88569a69c5b3ca2545859e34d81b05fc.png",
    name: "Borom Darou",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Ndiogou_Afia_-_Borom_Darou_[Clip_Officiel](48k).mp3",
  },
  {
    img: "../images_playlist/img/1000410611.png",
    name: "Baye Afia Reck",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Baye afia mbacké.mp3",
  },

  {
    img: "../images_playlist/img/1a20a07d186434264285f24a7aa04487.png",
    name: "Lamp Fall",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Lamp Fall.mp3",
  },

  {
    img: "../images_playlist/img/VideoCapture_20240828-174228.jpg",
    name: "Bamba yaniouy Mome",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Ndiogou_Afia_-_Bamba_Yaniouy_Mom_[Audio_Officiel](256k).mp3",
  }, {
    img: "../images_playlist/img/VideoCapture_20241119-172910.jpg",
    name: "Cheikh Moussa Ka",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Ndiogou_afia_mbaye_cheikh_moussaka(256k).mp3",
  }, {
    img: "../images_playlist/img/VideoCapture_20241119-172346.jpg",
    name: "Sorolamini",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/Ndiogou_Afia_Sorolamini___Y(256k).mp3",
  },

  {
    img: "../images_playlist/img/VideoCapture_20240901-085128.jpg",
    name: "BAYI GOOR FALL",
    artist: "Ndiogou Afia Mbaye",
    src: "../audio_playlist/NDIOGOU_MBAYE_-_BAYI_GOOR__Sénégal_Musique___Senegal_Music_(128k).mp3",
  },










    {
        img: "../images_playlist/img/20241024_190944.jpg",
        name: "Serigne Fallou Ci Xol Live",
        artist: "Ndiogou Afia Mbaye",
        src: "../audio_playlist/Fallou ci khol.mp3",
      },
      
      {
        img: "../images_playlist/img/01ee845ae1b63271f7821a6541474ee1.png",
        name: "Fallou Gallass Touba",
        artist: "Ndiogou Afia Mbaye",
        src: "../audio_playlist/fallou gallass Touba.mp3",
      },
      {
          img: "../images_playlist/img/Screenshot_20241029_175744_YouTube.jpg",
        name: "Jamilou",
        artist: "Ndiogou Afia Mbaye",
        src: "../audio_playlist/jamilou.mp3",
      },
      {
          img: "../images_playlist/img/c9550a50466d6bfabba5d77ddda2c454.png",
        name: "Touba Khayra",
        artist: "Ndiogou Afia Mbaye",
        src: "../audio_playlist/clip_Ndiogou_Afia_MBAYE_touba_khayra_Clip1_mpeg(256k).mp3",
      },
        {
          img: "../images_playlist/img/VideoCapture_20240831-080211.jpg",
          name: "Serigne Fallou Ci Xol ",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-__Serigne_Fallou_Ci_Xol_[Audio_Officiel](256k).mp3",
        },
        {
          img: "../images_playlist/img/VideoCapture_20240901-090143.jpg",
          name: "Ndiogou Afia Allah",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Allah_[Audio_Officiel](128k).mp3",
        },
        {
          img: "../images_playlist/img/Screenshot_20240909_213949_YouTube.jpg",
          name: "Bamba Barri Dolé",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Bamba_Barri_Dolé_[Clip_Officiel](360p).mp3",
        },
        {
          img: "../images_playlist/img/Screenshot_20240803_114048_Instagram Lite.jpg",
          name: "Bamba Fa Danne",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Bamba_Fa_Danne__[Clip_Officiel](256k).mp3",
        },
        {
          img: "../images_playlist/img/32f54bbee794dd702a4fe057346eb257.png",
          name: "Serigne Bara Afia",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Bara_Afia_[Audio_Officiel](256k).mp3",
        },

        {
          img: "../images_playlist/img/1717428461185.jpg",
          name: "Bara Mouhamadou Lamine",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Bara_Mouhamadou_Lamine___Live__(128k).mp3",
        },
        {
          img: "../images_playlist/img/VideoCapture_20241026-162055.jpg",
          name: "Baye Karim Live",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Baye_Karim___Live__(128k).mp3",
        },
        {
            img: "../images_playlist/img/VideoCapture_20241030-232129.jpg",
          name: "Bayou Goor Fall",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Bayou_Goor_[Audio_Officiel](256k).mp3",
        },
        {
            img: "../images_playlist/img/VideoCapture_20240901-085128.jpg",
          name: "Beug Fallou[Clip_Officiel]",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Beug_Fallou_[Clip_Officiel](256k).mp3",
        },
        {
            img: "../images_playlist/img/20241017_144543.jpg",
          name: "Cheikh Issa Dienne",
          artist: "Ndiogou Afia Mbaye",
          src: "../audio_playlist/Ndiogou_Afia_-_Cheikh_Issa_Dienne_[_Audio_Officiel_](128k).mp3",
        },
        {
            img: "../images_playlist/img/Screenshot_20240716_224914_YouTube.png",
            name: "Cheikh Massamba Mbacké",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Cheikh_Massamba_[_Audio_Officiel_](128k).mp3",
          },
          {
            img: "../images_playlist/img/Screenshot_20241003_171914_YouTube.jpg",
            name: "Mame Mor Diarra",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Mame_Mor_Diarra_[_Audio_Officiel_](128k).mp3",
          },
          {
            img: "../images_playlist/img/VideoCapture_20240901-084601.jpg",
            name: "Serigne Sam Fall",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Sam_Fall__[Audio_Officiel](256k).mp3",
          },
          {
            img: "../images_playlist/img/1000358440.png",
            name: "Cheikh_Ibra_Fall_[Audio_Officiel]",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Sant_Cheikh_Ibra_Fall_[Audio_Officiel](256k).mp3",
          },
          {
            img: "../images_playlist/img/1717428379077.png",
            name: "Sant Serigne Saliou",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Sant_Serigne_Saliou_[Clip_Officiel](256k).mp3",
          },
          {
            img: "../images_playlist/img/12ed3898df5f143b8fc4c288fc125289.png",
            name: "Serigne Touba Live",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/serigne touba live.mp3",
          },
          {
            img: "../images_playlist/img/1718292557020.jpg",
            name: "Serigne Saliou[Clip_Officiel]",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Serigne_Saliou_[Clip_Officiel](256k).mp3",
          },
          {
            img: "../images_playlist/img/1723533249518.jpg",
            name: "Serigne Saliou FALL",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Serigne_Saliou_Fall__[_Audio_Officiel_](128k).mp3",
          },
          {
              img: "../images_playlist/img/Capture d’écran (64).png",
            name: "Ndiogou Afia Serigne Touba Rek",
            artist: "Ndiogou Afia Mbaye",
            src: "../audio_playlist/Ndiogou_Afia_-_Serigne_Touba_Rek_[Clip_Officiel](256k).mp3",
          },
          {
              img: "../images_playlist/img/Screenshot_20241029_175555_YouTube.jpg",
              name: "Cheikh Ibra Fall Live",
              artist: "Ndiogou Afia Mbaye",
              src: "../audio_playlist/NdiogouAfia.mp3",
            },
           
            {
              img: "../images_playlist/img/VideoCapture_20241024-165930.jpg",
              name: "serigne touba rek live",
              artist: "Ndiogou Afia Mbaye",
              src: "../audio_playlist/serigne touba rek live.mp3",
            }


      
]






















const wrapper = document.querySelector('.wrapper'),
musiciImg = wrapper.querySelector(".img-area img"),
musiciName = wrapper.querySelector(".song-details .name"),
musiciArtiste = wrapper.querySelector(".song-details .artist"),
mainAudio =wrapper.querySelector('#main-audio'),
PlayPause = wrapper.querySelector('.play-pause'),
PlayPause2 = wrapper.querySelector('.play-pause2'),
prevBtn = wrapper.querySelector('#prev'),
nextBtn = wrapper.querySelector('#next'),
progressArea = wrapper.querySelector('.progress-area'),
progressBar = wrapper.querySelector('.progress-bar'),
musicList = wrapper.querySelector('.music-list'),
hideMusicBtn = musicList.querySelector('#close'),
Showmorebtn = wrapper.querySelector('#more-music');













let musicIndex = 1;
window.addEventListener("load",()=>{
    loadMusic(musicIndex);
    playingNow();
})

function loadMusic(indexNumb){
musiciName.innerText = allMusic[indexNumb - 1].name;
musiciArtiste.innerText = allMusic[indexNumb - 1].artist;
musiciImg.src = allMusic[indexNumb -1].img;
mainAudio.src = allMusic[indexNumb -1].src;


}
function playMusic(){
    wrapper.classList.add("paused");
    PlayPause.style.visibility = "hidden";
    mainAudio.play()
    playingNow()
}

function pauseMusic(){
    wrapper.classList.remove("paused");
    mainAudio.pause()
    playingNow()
}

function nextMusic(){
    PlayPause.style.visibility = "hidden";
    PlayPause2.style.visibility = "visible";
    musicIndex++;
    musicIndex > allMusic.length ? musicIndex = 1 : musicIndex = musicIndex
    loadMusic(musicIndex)
    playingNow()
    playMusic();
}
function prevMusic(){
    PlayPause.style.visibility = "hidden";
    PlayPause2.style.visibility = "visible";
    musicIndex--;
    musicIndex > allMusic.length ? musicIndex = allMusic.length : musicIndex = musicIndex
    loadMusic(musicIndex)
    playingNow()
    playMusic();
}


// button play
PlayPause.addEventListener("click",()=>{
    const isMusicPaused = wrapper.classList.contains("paused");
    isMusicPaused ? pauseMusic : playMusic();
    // alert('astar');
    PlayPause.style.visibility = "hidden";
    PlayPause2.style.visibility = "visible";
   
    playingNow()

});

// button pause

PlayPause2.addEventListener("click",()=>{

    // alert('astar');
    PlayPause.style.visibility = "visible";
    PlayPause2.style.visibility = "hidden";
    pauseMusic()
    playingNow()
   

});

nextBtn.addEventListener("click",()=>{

nextMusic();

});
prevBtn.addEventListener("click",()=>{

    prevMusic();
    playingNow()
    
    });
    
   
mainAudio.addEventListener("timeupdate",(e)=>{


    const currentTime = e.target.currentTime;
    const duration = e.target.duration;
    let progressWidth = (currentTime / duration) * 100;
    progressBar.style.width = `${progressWidth}%`;
    let musicCurrentTime = wrapper.querySelector('.current'),
    musicDuration = wrapper.querySelector('.duration');



    mainAudio.addEventListener("loadeddata",()=>{

        //  update song duration
         let audioduration = mainAudio.duration;
         let totalMin =Math.floor(audioduration / 60);
         let totalSec =Math.floor(audioduration % 60);
         if (totalSec < 10){
            totalSec = `0${totalSec}`;
         }

         musicDuration.innerText = `${totalMin}:${totalSec}`;



    });
            //  update playing song current times
            let currentMin =Math.floor(currentTime / 60);
            let currentSec =Math.floor(currentTime % 60);
            if (currentSec < 10){
               currentSec = `0${currentSec}`;
            }
        musicCurrentTime.innerText = `${currentMin}:${currentSec}`;

});



const repeatBtn = wrapper.querySelector('#repeat');
const repeat_one_Btn = wrapper.querySelector('#repeat_one');

repeatBtn.addEventListener('click',()=>{

    repeat_one_Btn.style.visibility = "visible";
    repeatBtn.style.visibility = "hidden";
    nextMusic();
    playingNow()

});
repeat_one_Btn.addEventListener('click',()=>{
    mainAudio.currentTime = 0;
    loadMusic(musicIndex);
    repeat_one_Btn.style.visibility = "hidden";
    repeatBtn.style.visibility = "visible";
    playingNow()
  


});



Showmorebtn.addEventListener('click',()=>{
    musicList.classList.toggle("show");

});


hideMusicBtn.addEventListener('click',()=>{
    Showmorebtn.click();

});

const ulTag = wrapper.querySelector('ul');


for (let i = 0; i < allMusic.length; i++) {
    
let liTag = `<li li-index="${i +1}" style="cursor: pointer;">
                <div class="row">
                <span>${allMusic[i].name}</span>
                </div>
                <audio src="${allMusic[i].src}" class="${allMusic[i].src}" ></audio>
                </li>`;
   ulTag.insertAdjacentHTML("beforeend",liTag);
}
   
   let allLiTags = ulTag.querySelectorAll("li");

 function playingNow(){

    for (let j = 0; j < allLiTags.length; j++) {
        let audioTag =allLiTags[j].querySelector('.audio-duration')
        if(allLiTags[j].classList.contains("playing")){
            allLiTags[j].classList.remove("playing");


        }
        if(allLiTags[j].getAttribute("li-index")== musicIndex){
            allLiTags[j].classList.add("playing");
        }
        allLiTags[j].setAttribute("onclick","clicked(this)");
    
       }
    
 }

  function clicked(element){

        let getliindex = element.getAttribute("li-index");
        musicIndex = getliindex;
        PlayPause.style.visibility = "hidden";
        PlayPause2.style.visibility = "visible";
        loadMusic(musicIndex);
        playMusic();
        playingNow();
  }

   
